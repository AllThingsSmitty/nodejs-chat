function getName(){var s=window.names[Math.floor(Math.random()*window.names.length)],e=s.split(",");return e.length>1?$.trim(e[1])+" "+$.trim(e[0]):s}function escaped(s){return $("<div></div>").html(s).html()}function searchUrlFor(s){return"https://www.google.com/search?q="+encodeURIComponent(s)+"%20site:wikipedia.org&btnI=3564"}var name=getName();$("#data").attr("placeholder","send message as "+name);var socket=io.connect("/");socket.on("connect",function(){socket.emit("adduser",name)}),socket.on("updatechat",function(s,e){$("#conversation").append("<b>"+escaped(s)+":</b> "+escaped(e)+"<br>")}),socket.on("updateusers",function(s){$("#users").empty(),$.each(s,function(s,e){$("#users").append('<div><a href="'+searchUrlFor(s)+'" target="_blank">'+s+"</div>")})}),socket.on("servernotification",function(s){var e=searchUrlFor(s.username);s.connected?(s.toSelf&&(s.username="you"),$("#conversation").append('connected: <a href="'+e+'" target="_blank">'+escaped(s.username)+"</a><br>")):$("#conversation").append('disconnected: <a href="'+e+'" target="_blank">'+escaped(s.username)+"</a><br>")}),$(function(){$("#data").keypress(function(s){if(13==s.which){var e=$("#data").val();$("#data").val(""),socket.emit("sendchat",e)}})});