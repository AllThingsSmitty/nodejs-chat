function getName(){var e=window.names[Math.floor(Math.random()*window.names.length)],a=e.split(",");return a.length>1?$.trim(a[1])+" "+$.trim(a[0]):e}function escaped(e){return $("<div></div>").html(e).html()}function searchUrlFor(e){return"https://www.google.com/search?q="+encodeURIComponent(e)+"%20site:wikipedia.org&btnI=3564"}var name=getName();$("#data").attr("placeholder","Send message as "+name);var socket=io.connect("/");socket.on("connect",function(){socket.emit("adduser",name)}),socket.on("updatechat",function(e,a){$("#conversation").append("<b>"+escaped(e)+":</b> "+escaped(a)+"<br>")}),socket.on("updateusers",function(e){$("#users").empty(),$.each(e,function(e,a){$("#users").append('<div><a href="'+searchUrlFor(e)+'" target="_blank">'+e+"</div>")})}),socket.on("servernotification",function(e){var a=searchUrlFor(e.username);e.connected?(e.toSelf&&(e.username="you"),$("#conversation").append('<div class="alert alert-success" role="alert"><b>Connected:</b> <a href="'+a+'" target="_blank">'+escaped(e.username)+"</a></div>")):$("#conversation").append('<div class="alert alert-danger" role="alert"><b>Disconnected:</b> <a href="'+a+'" target="_blank">'+escaped(e.username)+"</a></div>")}),$(function(){$("#data").keypress(function(e){if(13==e.which){var a=$("#data").val();$("#data").val(""),socket.emit("sendchat",a)}})});